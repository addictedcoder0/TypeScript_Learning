!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);class n{constructor(e,t,r,n){this.whereToRenderTemplateElement=document.getElementById(e),this.whereToRenderElement=document.getElementById(t);const i=document.importNode(this.whereToRenderTemplateElement.content,!0);this.whatToRenderElement=i.firstElementChild,n&&(this.whatToRenderElement.id=n),this.attach(r)}attach(e){this.whereToRenderElement.insertAdjacentElement(e?"afterbegin":"beforeend",this.whatToRenderElement)}}class i{constructor(e){this.value=e}static createValidator(e){return new i(e)}isRequired(e){return this.required=e,this}withMinLength(e){return this.minLength=e,this}withMaxLength(e){return this.maxLength=e,this}withMinValue(e){return this.min=e,this}withMaxValue(e){return this.max=e,this}validate(){let e=!0;return this.required&&(e=e&&0!==this.value.toString().trim().length),this.minLength&&(e=e&&this.value.toString().trim().length>=this.minLength),this.maxLength&&(e=e&&this.value.toString().trim().length<=this.maxLength),"number"==typeof this.value&&(this.min&&(e=e&&+this.value>=this.min),this.max&&(e=e&&+this.value<=this.max)),e}}function s(e,t,r){const n=r.value;return{configurable:!0,get(){return n.bind(this)}}}var o=function(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};class a extends n{constructor(e,t){super("single-project",e,!1,t.getProjectId().toString()),this.project=t,this.configure(),this.renderContent()}configure(){this.whatToRenderElement.addEventListener("dragstart",this.dragStartHandler),this.whatToRenderElement.addEventListener("dragend",this.dragEndHandler)}renderContent(){this.whatToRenderElement.querySelector("h2").textContent=this.project.getProjectTitle(),this.whatToRenderElement.querySelector("h3").textContent=this.project.getNumberOfPeople().toString()+" developer(s)",this.whatToRenderElement.querySelector("p").textContent=this.project.getProjectDescription()}dragStartHandler(e){console.log(e),e.dataTransfer.setData("text/plain",this.project.getProjectId().toString()),e.dataTransfer.effectAllowed="move"}dragEndHandler(e){console.log(e)}}o([s],a.prototype,"dragStartHandler",null),o([s],a.prototype,"dragEndHandler",null);class l{constructor(e,t,r,n,i){this.projectId=e,this.projectTitle=t,this.projectDesc=r,this.numOfPeople=n,this.hasFinished=i}getProjectId(){return this.projectId}getProjectTitle(){return this.projectTitle}getProjectDescription(){return this.projectDesc}getNumberOfPeople(){return this.numOfPeople}hasProjectFinished(){return this.hasFinished}setFinishedState(e){this.hasFinished=e}}class c{constructor(){this.projects=[],this.listeners=[]}static getInstance(){return this.projectState||(this.projectState=new c),this.projectState}addListener(e){this.listeners.push(e)}addProject(e,t,r){var n;const i=new l(Math.random(),e,t,r,!1);null===(n=this.projects)||void 0===n||n.push(i),this.updateListeners()}moveProject(e,t){const r=this.projects.find(t=>t.getProjectId().toString()===e);r&&r.hasProjectFinished()!==t&&r.setFinishedState(t),this.updateListeners()}updateListeners(){for(const e of this.listeners)e(this.projects.slice())}}var d=function(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};class h extends n{constructor(e){super("project-list","app",!1,e+"-projects"),this.typeOfProject=e,this.assignedProjects=[],this.projectState=c.getInstance(),this.configure(),this.renderContent()}renderProjects(){document.getElementById(this.typeOfProject+"-projects-list").innerHTML="";for(const e of this.assignedProjects)new a(this.whatToRenderElement.querySelector("ul").id,e)}configure(){this.whatToRenderElement.addEventListener("dragover",this.dragOverHandler),this.whatToRenderElement.addEventListener("drop",this.dropHandler),this.whatToRenderElement.addEventListener("dragleave",this.dragLeaveHandler),this.projectState.addListener(e=>{this.assignedProjects=e.filter(e=>"active"===this.typeOfProject?!e.hasProjectFinished():e.hasProjectFinished()),this.renderProjects()})}renderContent(){const e=this.typeOfProject+"-projects-list";this.whatToRenderElement.querySelector("ul").id=e,this.whatToRenderElement.querySelector("h2").textContent=this.typeOfProject.toUpperCase()+" PROJECTS"}dropHandler(e){e.preventDefault();const t=e.dataTransfer.getData("text/plain");console.log(),this.projectState.moveProject(t,"active"!==this.typeOfProject)}dragOverHandler(e){e.dataTransfer&&"text/plain"===e.dataTransfer.types[0]&&(e.preventDefault(),this.whatToRenderElement.querySelector("ul").classList.add("droppable"))}dragLeaveHandler(e){this.whatToRenderElement.querySelector("ul").classList.remove("droppable")}}d([s],h.prototype,"dropHandler",null),d([s],h.prototype,"dragOverHandler",null),d([s],h.prototype,"dragLeaveHandler",null);var u=function(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};class p extends n{constructor(){super("project-input","app",!0,"user-input"),this.titleInputEle=this.whatToRenderElement.querySelector("#title"),this.descriptionInputEle=this.whatToRenderElement.querySelector("#description"),this.peopleInputEle=this.whatToRenderElement.querySelector("#people"),this.projectState=c.getInstance(),this.configure()}gatheruserInput(){const e=this.titleInputEle.value,t=this.descriptionInputEle.value,r=this.peopleInputEle.valueAsNumber,n=i.createValidator(e).isRequired(!0).validate(),s=i.createValidator(t).isRequired(!0).withMinLength(5).validate(),o=i.createValidator(r).isRequired(!0).withMinValue(1).withMaxValue(5).validate();return n&&s&&o?[e,t,r]:(console.log("Invalid Input being submitted , Please Try Again"),void alert("Invalid Input being submitted , Please Try Again"))}clearInput(){this.titleInputEle.value="",this.descriptionInputEle.value="",this.peopleInputEle.value=""}submitHandler(e){e.preventDefault();const t=this.gatheruserInput();if(Array.isArray(t)){const[e,r,n]=t;this.projectState.addProject(e,r,n)}this.clearInput(),console.log(this.titleInputEle.value)}configure(){this.whatToRenderElement.addEventListener("submit",this.submitHandler)}renderContent(){}}u([s],p.prototype,"gatheruserInput",null),u([s],p.prototype,"submitHandler",null);new p,new h("active"),new h("finished");console.log("%%%%%%%%*******.    (((())))......   "),console.log("dchsdkjsdckjsd")}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NsYXNzZXMvQ29tcG9uZW50LnRzIiwid2VicGFjazovLy8uL3NyYy9jbGFzc2VzL0RhdGFTYW5pdGl6ci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY2xhc3Nlcy9BdXRvQmluZGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9jbGFzc2VzL1Byb2plY3RJdGVtLnRzIiwid2VicGFjazovLy8uL3NyYy9jbGFzc2VzL1Byb2plY3QudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NsYXNzZXMvUHJvamVjdFN0YXRlLnRzIiwid2VicGFjazovLy8uL3NyYy9jbGFzc2VzL1Byb2plY3RMaXN0LnRzIiwid2VicGFjazovLy8uL3NyYy9jbGFzc2VzL2FwcC50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIkNvbXBvbmVudCIsInRlbXBsYXRlSUQiLCJ0YXJnZXRFbGVtZW50SUQiLCJpbnNlcnRBdFN0YXJ0IiwibmV3RWxlbWVudElEIiwidGhpcyIsIndoZXJlVG9SZW5kZXJUZW1wbGF0ZUVsZW1lbnQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwid2hlcmVUb1JlbmRlckVsZW1lbnQiLCJpbXBvcnRlZE5vZGUiLCJpbXBvcnROb2RlIiwiY29udGVudCIsIndoYXRUb1JlbmRlckVsZW1lbnQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImlkIiwiYXR0YWNoIiwiaW5zZXJ0QWRqYWNlbnRFbGVtZW50IiwiRGF0YVNhbml0aXpyIiwicmVxdWlyZWQiLCJtaW5MZW5ndGgiLCJtYXhMZW5ndGgiLCJtaW4iLCJtYXgiLCJpc1ZhbGlkIiwidG9TdHJpbmciLCJ0cmltIiwibGVuZ3RoIiwiYXV0b2JpbmQiLCJ0YXJnZXQiLCJtZXRob2ROYW1lIiwiZGVzY3JpcHRvck9mTWV0aG9kIiwib3JpZ2luYWxNZXRob2QiLCJjb25maWd1cmFibGUiLCJ0YXJnZXRFbGVJRCIsInByb2plY3QiLCJzdXBlciIsImdldFByb2plY3RJZCIsImNvbmZpZ3VyZSIsInJlbmRlckNvbnRlbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiZHJhZ1N0YXJ0SGFuZGxlciIsImRyYWdFbmRIYW5kbGVyIiwicXVlcnlTZWxlY3RvciIsInRleHRDb250ZW50IiwiZ2V0UHJvamVjdFRpdGxlIiwiZ2V0TnVtYmVyT2ZQZW9wbGUiLCJnZXRQcm9qZWN0RGVzY3JpcHRpb24iLCJldmVudCIsImNvbnNvbGUiLCJsb2ciLCJkYXRhVHJhbnNmZXIiLCJzZXREYXRhIiwiZWZmZWN0QWxsb3dlZCIsIlByb2plY3QiLCJwcm9qZWN0SWQiLCJwcm9qZWN0VGl0bGUiLCJwcm9qZWN0RGVzYyIsIm51bU9mUGVvcGxlIiwiaGFzRmluaXNoZWQiLCJmaW5pc2hlZFN0YXRlIiwicHJvamVjdHMiLCJsaXN0ZW5lcnMiLCJwcm9qZWN0U3RhdGUiLCJMaXN0ZW5lcmZuIiwicHVzaCIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJuZXdQcm9qIiwiTWF0aCIsInJhbmRvbSIsInVwZGF0ZUxpc3RlbmVycyIsInByb2plY3RJRCIsImZpbmQiLCJwcmoiLCJoYXNQcm9qZWN0RmluaXNoZWQiLCJzZXRGaW5pc2hlZFN0YXRlIiwibGlzdGVuZXJmbiIsInNsaWNlIiwidHlwZU9mUHJvamVjdCIsImFzc2lnbmVkUHJvamVjdHMiLCJnZXRJbnN0YW5jZSIsImlubmVySFRNTCIsInByakl0ZW0iLCJkcmFnT3ZlckhhbmRsZXIiLCJkcm9wSGFuZGxlciIsImRyYWdMZWF2ZUhhbmRsZXIiLCJhZGRMaXN0ZW5lciIsImZpbHRlciIsInJlbmRlclByb2plY3RzIiwibGlzdElkIiwidG9VcHBlckNhc2UiLCJwcmV2ZW50RGVmYXVsdCIsInByaklEIiwiZ2V0RGF0YSIsIm1vdmVQcm9qZWN0IiwidHlwZXMiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJ0aXRsZUlucHV0RWxlIiwiZGVzY3JpcHRpb25JbnB1dEVsZSIsInBlb3BsZUlucHV0RWxlIiwiZW50ZXJlZFRpdGxlIiwiZW50ZXJlZERlc2MiLCJlbnRlcmVkUGVvcGxlQ291bnQiLCJ2YWx1ZUFzTnVtYmVyIiwiaXNWYWxpZFRpdGxlIiwiY3JlYXRlVmFsaWRhdG9yIiwiaXNSZXF1aXJlZCIsInZhbGlkYXRlIiwiaXNWYWxpZERlc2MiLCJ3aXRoTWluTGVuZ3RoIiwiaXNWYWxpZFBlb3BsZUNvdW50Iiwid2l0aE1pblZhbHVlIiwid2l0aE1heFZhbHVlIiwiYWxlcnQiLCJ1c2VySW5wdXQiLCJnYXRoZXJ1c2VySW5wdXQiLCJBcnJheSIsImlzQXJyYXkiLCJkZXNjIiwicGVvcGxlIiwiYWRkUHJvamVjdCIsImNsZWFySW5wdXQiLCJzdWJtaXRIYW5kbGVyIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJD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QixTQUFTbkMsS0FBS3dILGVBR25ELGtCQXhEUCxHQUZDakcsRyxvQ0FnQ0QsR0FEQ0EsRyxrQ0FrQ2MsSUFBSSxFQUNFLElBQUksRUFBWSxVQUNkLElBQUksRUFBWSxZQUV6Q3FCLFFBQVFDLElBQUkseUNBQ1pELFFBQVFDLElBQUkiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiLyoqXHJcbiAqIEJhc2UgQ2xhc3MgZm9yIGFsbCBDb21wb25ldCBjbGFzc2VzXHJcbiAqL1xyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQ29tcG9uZW50PFQgZXh0ZW5kcyBIVE1MRWxlbWVudCxVIGV4dGVuZHMgSFRNTEVsZW1lbnQ+IHtcclxuICAgIHByb3RlY3RlZCB3aGVyZVRvUmVuZGVyVGVtcGxhdGVFbGVtZW50OiBIVE1MVGVtcGxhdGVFbGVtZW50O1xyXG4gICAgcHJvdGVjdGVkIHdoZXJlVG9SZW5kZXJFbGVtZW50OiBUO1xyXG4gICAgcHJvdGVjdGVkIHdoYXRUb1JlbmRlckVsZW1lbnQ6IFU7XHJcblxyXG4gICAgY29uc3RydWN0b3IodGVtcGxhdGVJRCA6IHN0cmluZyAsIHRhcmdldEVsZW1lbnRJRCA6IHN0cmluZyAsaW5zZXJ0QXRTdGFydCA6IGJvb2xlYW4sIG5ld0VsZW1lbnRJRD86IHN0cmluZyl7XHJcbiAgICAgICAgdGhpcy53aGVyZVRvUmVuZGVyVGVtcGxhdGVFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGVtcGxhdGVJRCkhIGFzIEhUTUxUZW1wbGF0ZUVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy53aGVyZVRvUmVuZGVyRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhcmdldEVsZW1lbnRJRCkhIGFzIFQ7XHJcbiAgICAgICBcclxuICAgICAgICBjb25zdCBkZWVwQ2xvbmU6IGJvb2xlYW4gPSB0cnVlO1xyXG4gICAgICAgIGNvbnN0IGltcG9ydGVkTm9kZSA9IGRvY3VtZW50LmltcG9ydE5vZGUoXHJcbiAgICAgICAgICB0aGlzLndoZXJlVG9SZW5kZXJUZW1wbGF0ZUVsZW1lbnQuY29udGVudCxcclxuICAgICAgICAgIGRlZXBDbG9uZVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgIFxyXG4gICAgICAgIHRoaXMud2hhdFRvUmVuZGVyRWxlbWVudCA9IGltcG9ydGVkTm9kZS5maXJzdEVsZW1lbnRDaGlsZCBhcyBVO1xyXG4gICAgICAgIGlmKG5ld0VsZW1lbnRJRCl7XHJcbiAgICAgICAgICAgIHRoaXMud2hhdFRvUmVuZGVyRWxlbWVudC5pZCA9IG5ld0VsZW1lbnRJRDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuYXR0YWNoKGluc2VydEF0U3RhcnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXR0YWNoKGluc2VydEF0U3RhcnQ6Ym9vbGVhbikge1xyXG4gICAgICAgIHRoaXMud2hlcmVUb1JlbmRlckVsZW1lbnQuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KGluc2VydEF0U3RhcnQgPyBcImFmdGVyYmVnaW5cIjpcImJlZm9yZWVuZFwiLCB0aGlzLndoYXRUb1JlbmRlckVsZW1lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhYnN0cmFjdCBjb25maWd1cmUoKTogdm9pZDtcclxuICAgIHB1YmxpYyBhYnN0cmFjdCByZW5kZXJDb250ZW50KCk6IHZvaWQ7XHJcbn0iLCJleHBvcnQgY2xhc3MgRGF0YVNhbml0aXpyIHsgLy8gZXhwb3J0IHdpbGwgbWFrZSBpdCBlbGlnaWJsZSBmb3IgaW1wb3J0aW5nXHJcblxyXG4gICAgcHJpdmF0ZSB2YWx1ZSA6IHN0cmluZyB8IG51bWJlcjtcclxuICAgIHByaXZhdGUgcmVxdWlyZWQ/IDogYm9vbGVhbjtcclxuICAgIHByaXZhdGUgbWluTGVuZ3RoPyA6IG51bWJlcjtcclxuICAgIHByaXZhdGUgbWF4TGVuZ3RoPyA6IG51bWJlcjtcclxuICAgIHByaXZhdGUgbWluPyA6IG51bWJlcjtcclxuICAgIHByaXZhdGUgbWF4PyA6IG51bWJlcjtcclxuXHJcbiAgICBwcml2YXRlIGNvbnN0cnVjdG9yKHZhbHVlIDogc3RyaW5nfG51bWJlcil7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlVmFsaWRhdG9yKHZhbHVlOnN0cmluZ3xudW1iZXIpIDogRGF0YVNhbml0aXpyIHtcclxuICAgICAgICByZXR1cm4gbmV3IERhdGFTYW5pdGl6cih2YWx1ZSk7XHJcbiAgICB9IFxyXG5cclxuICAgIHB1YmxpYyBpc1JlcXVpcmVkKHJlcXVpcmVkIDogYm9vbGVhbikgOiBEYXRhU2FuaXRpenIge1xyXG4gICAgICAgIHRoaXMucmVxdWlyZWQgPSByZXF1aXJlZDtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgd2l0aE1pbkxlbmd0aChtaW5MZW5ndGggOiBudW1iZXIpIDogRGF0YVNhbml0aXpyIHtcclxuICAgICAgICB0aGlzLm1pbkxlbmd0aCA9IG1pbkxlbmd0aDtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgd2l0aE1heExlbmd0aChtYXhMZW5ndGggOiBudW1iZXIpIDogRGF0YVNhbml0aXpyIHtcclxuICAgICAgICB0aGlzLm1heExlbmd0aCA9IG1heExlbmd0aDtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgd2l0aE1pblZhbHVlKG1pbiA6IG51bWJlcikgOiBEYXRhU2FuaXRpenIge1xyXG4gICAgICAgIHRoaXMubWluID0gbWluO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB3aXRoTWF4VmFsdWUobWF4IDogbnVtYmVyKSA6IERhdGFTYW5pdGl6ciB7XHJcbiAgICAgICAgdGhpcy5tYXggPSBtYXg7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHZhbGlkYXRlKCkgOiBib29sZWFuIHsgXHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IGlzVmFsaWQgPSB0cnVlO1xyXG4gICAgICAgIC8vIFN0cmluZyB2YWxpZGF0aW9uXHJcbiAgICAgICAgaWYodGhpcy5yZXF1aXJlZCl7XHJcbiAgICAgICAgICAgIGlzVmFsaWQgPSBpc1ZhbGlkICYmIHRoaXMudmFsdWUudG9TdHJpbmcoKS50cmltKCkubGVuZ3RoICE9PSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZih0aGlzLm1pbkxlbmd0aCl7XHJcbiAgICAgICAgICAgIGlzVmFsaWQgPSBpc1ZhbGlkICYmIHRoaXMudmFsdWUudG9TdHJpbmcoKS50cmltKCkubGVuZ3RoID49IHRoaXMubWluTGVuZ3RoO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZih0aGlzLm1heExlbmd0aCl7XHJcbiAgICAgICAgICAgIGlzVmFsaWQgPSBpc1ZhbGlkICYmIHRoaXMudmFsdWUudG9TdHJpbmcoKS50cmltKCkubGVuZ3RoIDw9IHRoaXMubWF4TGVuZ3RoO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gbnVtYmVyIHZhbGlkYXRpb25cclxuICAgICAgICBpZih0eXBlb2YgdGhpcy52YWx1ZSA9PT0nbnVtYmVyJyl7XHJcbiAgICAgICAgICAgIGlmKHRoaXMubWluKXtcclxuICAgICAgICAgICAgICAgIGlzVmFsaWQgPSBpc1ZhbGlkICYmICgrdGhpcy52YWx1ZSkgPj0gdGhpcy5taW47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYodGhpcy5tYXgpe1xyXG4gICAgICAgICAgICAgICAgaXNWYWxpZCA9IGlzVmFsaWQgJiYgKCt0aGlzLnZhbHVlKSA8PSB0aGlzLm1heDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaXNWYWxpZDtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcblxyXG4iLCIvLyBHb2FsIDo6OjogQmluZCB0aGUgY2xhc3MgbGV2ZWwgJ3RoaXMnIGtleXdvcmQgd2l0aCB0aGUgZXZlbnRMaXN0ZW5lciBtZXRob2RzIFxyXG5leHBvcnQgZnVuY3Rpb24gYXV0b2JpbmQodGFyZ2V0OmFueSAsIG1ldGhvZE5hbWU6c3RyaW5nLGRlc2NyaXB0b3JPZk1ldGhvZCA6IFByb3BlcnR5RGVzY3JpcHRvcil7XHJcbiAgICBjb25zdCBvcmlnaW5hbE1ldGhvZCA9IGRlc2NyaXB0b3JPZk1ldGhvZC52YWx1ZTtcclxuICAgIGNvbnN0IGFkanVzdGVkRGVzY3JpcHRvciA6IFByb3BlcnR5RGVzY3JpcHRvciA9IHtcclxuICAgICAgICBjb25maWd1cmFibGU6dHJ1ZSxcclxuICAgICAgICBnZXQoKXtcclxuICAgICAgICAgICAgY29uc3QgYm91bmQgPSBvcmlnaW5hbE1ldGhvZC5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICByZXR1cm4gYm91bmQ7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBhZGp1c3RlZERlc2NyaXB0b3I7XHJcbn0iLCJpbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tIFwiLi9Db21wb25lbnRcIjtcclxuaW1wb3J0IHsgRHJhZ2dhYmxlIH0gZnJvbSBcIi4vRHJhZ2dhYmxlXCI7XHJcbmltcG9ydCB7IFByb2plY3QgfSBmcm9tIFwiLi9Qcm9qZWN0XCI7XHJcbmltcG9ydCB7IGF1dG9iaW5kIH0gZnJvbSBcIi4vQXV0b0JpbmRlclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFByb2plY3RJdGVtIGV4dGVuZHMgQ29tcG9uZW50PEhUTUxVTGlzdEVsZW1lbnQsSFRNTExJRWxlbWVudD4gaW1wbGVtZW50cyBEcmFnZ2FibGUge1xyXG4gICAgcHJpdmF0ZSBwcm9qZWN0IDogUHJvamVjdDtcclxuICAgIGNvbnN0cnVjdG9yKHRhcmdldEVsZUlEIDogc3RyaW5nLHByb2plY3QgOiBQcm9qZWN0KXtcclxuICAgICAgICBzdXBlcihcInNpbmdsZS1wcm9qZWN0XCIsdGFyZ2V0RWxlSUQsZmFsc2UscHJvamVjdC5nZXRQcm9qZWN0SWQoKS50b1N0cmluZygpKTtcclxuICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xyXG5cclxuICAgICAgICB0aGlzLmNvbmZpZ3VyZSgpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyQ29udGVudCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjb25maWd1cmUoKSA6IHZvaWQge1xyXG4gICAgICAgIHRoaXMud2hhdFRvUmVuZGVyRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLHRoaXMuZHJhZ1N0YXJ0SGFuZGxlcik7XHJcbiAgICAgICAgdGhpcy53aGF0VG9SZW5kZXJFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbmQnLHRoaXMuZHJhZ0VuZEhhbmRsZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW5kZXJDb250ZW50KCkgOiB2b2lkIHtcclxuICAgICAgICB0aGlzLndoYXRUb1JlbmRlckVsZW1lbnQucXVlcnlTZWxlY3RvcignaDInKSEudGV4dENvbnRlbnQgPSB0aGlzLnByb2plY3QuZ2V0UHJvamVjdFRpdGxlKCk7XHJcbiAgICAgICAgdGhpcy53aGF0VG9SZW5kZXJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2gzJykhLnRleHRDb250ZW50ID0gdGhpcy5wcm9qZWN0LmdldE51bWJlck9mUGVvcGxlKCkudG9TdHJpbmcoKStcIiBkZXZlbG9wZXIocylcIjtcclxuICAgICAgICB0aGlzLndoYXRUb1JlbmRlckVsZW1lbnQucXVlcnlTZWxlY3RvcigncCcpIS50ZXh0Q29udGVudCA9IHRoaXMucHJvamVjdC5nZXRQcm9qZWN0RGVzY3JpcHRpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBAYXV0b2JpbmRcclxuICAgIGRyYWdTdGFydEhhbmRsZXIoZXZlbnQgOiBEcmFnRXZlbnQpIDogdm9pZCB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXZlbnQpOyAgICBcclxuICAgICAgICBldmVudC5kYXRhVHJhbnNmZXIhLnNldERhdGEoXCJ0ZXh0L3BsYWluXCIsdGhpcy5wcm9qZWN0LmdldFByb2plY3RJZCgpLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIGV2ZW50LmRhdGFUcmFuc2ZlciEuZWZmZWN0QWxsb3dlZCA9IFwibW92ZVwiOyAvLyB0ZWxscyB0aGUgYnJvd3NlciBob3cgY3Vyc29yIHNob3VsZCBsb29rIGxpa2VcclxuICAgIH1cclxuXHJcbiAgICBAYXV0b2JpbmRcclxuICAgIGRyYWdFbmRIYW5kbGVyKGV2ZW50IDogRHJhZ0V2ZW50KSA6IHZvaWQge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGV2ZW50KTtcclxuICAgIH1cclxufSIsIlxyXG5leHBvcnQgY2xhc3MgUHJvamVjdCB7XHJcbiAgICBwcml2YXRlIHByb2plY3RJZCA6IG51bWJlcjtcclxuICAgIHByaXZhdGUgcHJvamVjdFRpdGxlIDogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBwcm9qZWN0RGVzYyA6IHN0cmluZztcclxuICAgIHByaXZhdGUgbnVtT2ZQZW9wbGUgOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIGhhc0ZpbmlzaGVkIDogYm9vbGVhbjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcm9qZWN0SWQgOiBudW1iZXIgLFxyXG4gICAgICAgIHByb2plY3RUaXRsZSA6IHN0cmluZyAsXHJcbiAgICAgICAgcHJvamVjdERlc2MgOiBzdHJpbmcgLFxyXG4gICAgICAgIG51bU9mUGVvcGxlIDogbnVtYmVyICxcclxuICAgICAgICBoYXNGaW5pc2hlZCA6IGJvb2xlYW5cclxuICAgICAgICApIHtcclxuICAgICAgICB0aGlzLnByb2plY3RJZCA9IHByb2plY3RJZDtcclxuICAgICAgICB0aGlzLnByb2plY3RUaXRsZSA9IHByb2plY3RUaXRsZTtcclxuICAgICAgICB0aGlzLnByb2plY3REZXNjID0gcHJvamVjdERlc2M7XHJcbiAgICAgICAgdGhpcy5udW1PZlBlb3BsZSA9IG51bU9mUGVvcGxlO1xyXG4gICAgICAgIHRoaXMuaGFzRmluaXNoZWQgPSBoYXNGaW5pc2hlZDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0UHJvamVjdElkKCkgOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnByb2plY3RJZDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0UHJvamVjdFRpdGxlKCkgOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnByb2plY3RUaXRsZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0UHJvamVjdERlc2NyaXB0aW9uKCkgOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnByb2plY3REZXNjO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXROdW1iZXJPZlBlb3BsZSgpIDogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5udW1PZlBlb3BsZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaGFzUHJvamVjdEZpbmlzaGVkKCkgOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5oYXNGaW5pc2hlZDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0RmluaXNoZWRTdGF0ZShmaW5pc2hlZFN0YXRlIDogYm9vbGVhbikgOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmhhc0ZpbmlzaGVkID0gZmluaXNoZWRTdGF0ZTtcclxuICAgIH1cclxufSIsIlxyXG4vKipcclxuICogXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgUHJvamVjdCB9IGZyb20gXCIuL1Byb2plY3RcIjtcclxuXHJcbi8vU2luZ2xldG9uIFV0aWxcclxuZXhwb3J0IGNsYXNzIFByb2plY3RTdGF0ZSB7XHJcbiAgICBcclxuICAgIHByaXZhdGUgcHJvamVjdHMgOiBQcm9qZWN0W10gPSBbXTtcclxuICAgIHByaXZhdGUgc3RhdGljIHByb2plY3RTdGF0ZSA6IFByb2plY3RTdGF0ZSA7XHJcblxyXG4gICAgLy8gd2Ugd2lsbCBzdG9yZSBsaXN0ZW5lcnMgYW5kIHB1c2ggbm90aWZpY2F0aW9uXHJcbiAgICAvLyB0byB0aGUgbGlzdGVuZXJzIGZvciBtb2RlbCBzdGF0ZSBjaGFuZ2VcclxuICAgIHByaXZhdGUgbGlzdGVuZXJzOiBhbnlbXSA9IFtdO1xyXG5cclxuICAgIHByaXZhdGUgY29uc3RydWN0b3IoKXsgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldEluc3RhbmNlKCkgOiBQcm9qZWN0U3RhdGV7XHJcbiAgICAgICAgaWYoIXRoaXMucHJvamVjdFN0YXRlKXtcclxuICAgICAgICAgICAgdGhpcy5wcm9qZWN0U3RhdGUgPSBuZXcgUHJvamVjdFN0YXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnByb2plY3RTdGF0ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWRkTGlzdGVuZXIoTGlzdGVuZXJmbiA6IEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMucHVzaChMaXN0ZW5lcmZuKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWRkUHJvamVjdCh0aXRsZTpzdHJpbmcgLCBkZXNjcmlwdGlvbiA6IHN0cmluZyAsIG51bU9mUGVvcGxlIDogbnVtYmVyICl7XHJcbiAgICAgICAgY29uc3QgbmV3UHJvaiA9IG5ldyBQcm9qZWN0KFxyXG4gICAgICAgICAgICBNYXRoLnJhbmRvbSgpLFxyXG4gICAgICAgICAgICB0aXRsZSxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgIG51bU9mUGVvcGxlLFxyXG4gICAgICAgICAgICBmYWxzZSAgIC8vIGJ5IGRlZmF1bHQgZXZlcnkgYWRkZWQgcHJvamVjdCBpcyBcIkFjdGl2ZVwiIG1lYW5zIG5vdENvbXBsZXRlZFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy5wcm9qZWN0cz8ucHVzaChuZXdQcm9qKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZUxpc3RlbmVycygpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBtb3ZlUHJvamVjdChwcm9qZWN0SUQgOiBzdHJpbmcgLCBoYXNGaW5pc2hlZCA6IGJvb2xlYW4pIDogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgcHJvamVjdCA9IHRoaXMucHJvamVjdHMuZmluZChwcmogPT4gcHJqLmdldFByb2plY3RJZCgpLnRvU3RyaW5nKCkgPT09IHByb2plY3RJRCk7XHJcbiAgICAgICAgaWYocHJvamVjdCAmJiBwcm9qZWN0Lmhhc1Byb2plY3RGaW5pc2hlZCgpICE9PSBoYXNGaW5pc2hlZCl7XHJcbiAgICAgICAgICAgIC8vIGlmIHN1Y2ggcHJvamVjdCBleGlzdCBhbmQgaXQgaXMgcmVhbGx5IGJlaW5nIGRyYWdnZWQgdG8gYW5vdGhlciBsaXN0XHJcbiAgICAgICAgICAgIHByb2plY3Quc2V0RmluaXNoZWRTdGF0ZShoYXNGaW5pc2hlZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudXBkYXRlTGlzdGVuZXJzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVMaXN0ZW5lcnMoKSA6IHZvaWQge1xyXG4gICAgICAgIGZvcihjb25zdCBsaXN0ZW5lcmZuIG9mIHRoaXMubGlzdGVuZXJzKSB7XHJcbiAgICAgICAgICAgIGxpc3RlbmVyZm4odGhpcy5wcm9qZWN0cy5zbGljZSgpKTsvLyBwYXNzIGFuIGNvcHkgb2YgcHJvamVjdHMgKGltbXV0YWJpbGl0eSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0gXHJcblxyXG5cclxuXHJcblxyXG4iLCJpbXBvcnQgeyBhdXRvYmluZCB9IGZyb20gXCIuL0F1dG9CaW5kZXJcIjtcclxuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSBcIi4vQ29tcG9uZW50XCI7XHJcbmltcG9ydCB7IERyYWdUYXJnZXQgfSBmcm9tIFwiLi9EcmFnVGFyZ2V0XCI7XHJcbmltcG9ydCB7IFByb2plY3QgfSBmcm9tIFwiLi9Qcm9qZWN0XCI7XHJcbmltcG9ydCB7IFByb2plY3RJdGVtIH0gZnJvbSBcIi4vUHJvamVjdEl0ZW1cIjtcclxuaW1wb3J0IHsgUHJvamVjdFN0YXRlIH0gZnJvbSBcIi4vUHJvamVjdFN0YXRlXCI7XHJcblxyXG4vKipcclxuICogXHJcbiAqIEdvYWwgOjo6OlxyXG4gKiAgICAgXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgUHJvamVjdExpc3QgZXh0ZW5kcyBDb21wb25lbnQ8SFRNTERpdkVsZW1lbnQsSFRNTEVsZW1lbnQ+IGltcGxlbWVudHMgRHJhZ1RhcmdldCB7XHJcbiAgICBwcml2YXRlIHR5cGVPZlByb2plY3QgOiAnYWN0aXZlJ3wnZmluaXNoZWQnOy8vIGxpdGVyYWwgdHlwZSBib3VuZFxyXG4gICAgcHJpdmF0ZSBwcm9qZWN0U3RhdGUgOiBQcm9qZWN0U3RhdGU7XHJcbiAgICBwcml2YXRlIGFzc2lnbmVkUHJvamVjdHMgOiBQcm9qZWN0W10gO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHR5cGVPZlByb2plY3QgOiAnYWN0aXZlJ3wnZmluaXNoZWQnKSB7IFxyXG4gICAgICAgIHN1cGVyKFwicHJvamVjdC1saXN0XCIsXCJhcHBcIixmYWxzZSxgJHt0eXBlT2ZQcm9qZWN0fS1wcm9qZWN0c2ApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMudHlwZU9mUHJvamVjdCA9IHR5cGVPZlByb2plY3Q7XHJcbiAgICAgICAgdGhpcy5hc3NpZ25lZFByb2plY3RzID0gW107XHJcbiAgICAgICAgdGhpcy5wcm9qZWN0U3RhdGUgPSBQcm9qZWN0U3RhdGUuZ2V0SW5zdGFuY2UoKTtcclxuXHJcbiAgICAgICAgdGhpcy5jb25maWd1cmUoKTtcclxuICAgICAgICB0aGlzLnJlbmRlckNvbnRlbnQoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlbmRlclByb2plY3RzKCkgOiB2b2lkIHtcclxuICAgICAgICAvLyBncmFiIHRoZSBwcm9qZWN0IGxpc3QgYnkgSURcclxuICAgICAgICBjb25zdCBsaXN0RWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7dGhpcy50eXBlT2ZQcm9qZWN0fS1wcm9qZWN0cy1saXN0YCkhIGFzIEhUTUxVTGlzdEVsZW1lbnQ7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy9jbGVhbiB0aGUgbGlzdEVsZSBpbm5lckhUTUwgYmVmb3JlIHJlbmRlcmluZ1xyXG4gICAgICAgIGxpc3RFbGUuaW5uZXJIVE1MID0gJyc7IFxyXG4gICAgICAgIGZvcihjb25zdCBwcmpJdGVtIG9mIHRoaXMuYXNzaWduZWRQcm9qZWN0cykge1xyXG4gICAgICAgICAgICBuZXcgUHJvamVjdEl0ZW0odGhpcy53aGF0VG9SZW5kZXJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ3VsJykhLmlkLHByakl0ZW0pO1xyXG5cclxuICAgICAgICAgICAgLy8gY29uc3QgbGlzdEl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xyXG4gICAgICAgICAgICAvLyBsaXN0SXRlbS50ZXh0Q29udGVudCA9IHByakl0ZW0uZ2V0UHJvamVjdFRpdGxlKCk7XHJcbiAgICAgICAgICAgIC8vIGxpc3RFbGUuYXBwZW5kQ2hpbGQobGlzdEl0ZW0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY29uZmlndXJlKCkgOiB2b2lkIHtcclxuXHJcbiAgICAgICAgdGhpcy53aGF0VG9SZW5kZXJFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnb3ZlclwiLHRoaXMuZHJhZ092ZXJIYW5kbGVyKTtcclxuICAgICAgICB0aGlzLndoYXRUb1JlbmRlckVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRyb3BcIix0aGlzLmRyb3BIYW5kbGVyKTtcclxuICAgICAgICB0aGlzLndoYXRUb1JlbmRlckVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdsZWF2ZVwiLHRoaXMuZHJhZ0xlYXZlSGFuZGxlcik7XHJcblxyXG4gICAgICAgIHRoaXMucHJvamVjdFN0YXRlLmFkZExpc3RlbmVyKChwcm9qZWN0cyA6IFByb2plY3RbXSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmFzc2lnbmVkUHJvamVjdHMgPSBwcm9qZWN0cy5maWx0ZXIoXHJcbiAgICAgICAgICAgICAgICAocHJvamVjdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHRoaXMudHlwZU9mUHJvamVjdCA9PT0gJ2FjdGl2ZScpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIXByb2plY3QuaGFzUHJvamVjdEZpbmlzaGVkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9qZWN0Lmhhc1Byb2plY3RGaW5pc2hlZCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlclByb2plY3RzKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlbmRlckNvbnRlbnQoKSA6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGxpc3RJZCA9IGAke3RoaXMudHlwZU9mUHJvamVjdH0tcHJvamVjdHMtbGlzdGA7XHJcbiAgICAgICAgdGhpcy53aGF0VG9SZW5kZXJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ3VsJykhLmlkID0gbGlzdElkO1xyXG4gICAgICAgIHRoaXMud2hhdFRvUmVuZGVyRWxlbWVudC5xdWVyeVNlbGVjdG9yKCdoMicpIS50ZXh0Q29udGVudCA9IHRoaXMudHlwZU9mUHJvamVjdC50b1VwcGVyQ2FzZSgpICsgJyBQUk9KRUNUUyc7XHJcbiAgICB9XHJcblxyXG4gICAgQGF1dG9iaW5kXHJcbiAgICBwdWJsaWMgZHJvcEhhbmRsZXIoZXZlbnQgOiBEcmFnRXZlbnQpOiB2b2lkIHsgXHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBjb25zdCBwcmpJRCA9IGV2ZW50LmRhdGFUcmFuc2ZlciEuZ2V0RGF0YShcInRleHQvcGxhaW5cIik7XHJcbiAgICAgICAgY29uc29sZS5sb2coKTtcclxuICAgICAgICB0aGlzLnByb2plY3RTdGF0ZS5tb3ZlUHJvamVjdChwcmpJRCx0aGlzLnR5cGVPZlByb2plY3QgPT09IFwiYWN0aXZlXCIgPyBmYWxzZSA6IHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIEBhdXRvYmluZFxyXG4gICAgcHVibGljIGRyYWdPdmVySGFuZGxlcihldmVudCA6IERyYWdFdmVudCk6IHZvaWQge1xyXG4gICAgICAgIC8vIGFsbG93IG9ubHkgdGF4dC9wbGFpbiBjb250ZW50IHRvIGJlIGRyb3BwYWJsZVxyXG4gICAgICAgIGlmKGV2ZW50LmRhdGFUcmFuc2ZlciAmJiBldmVudC5kYXRhVHJhbnNmZXIudHlwZXNbMF0gPT09IFwidGV4dC9wbGFpblwiKXtcclxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsgLy8gYnkgZGVmYXVsdCBKUyBkb24ndCBhbGxvdyBkcm9wcGluZyBvZiBlbGVtZW50c1xyXG4gICAgICAgICAgICB0aGlzLndoYXRUb1JlbmRlckVsZW1lbnQucXVlcnlTZWxlY3RvcigndWwnKSEuY2xhc3NMaXN0LmFkZChcImRyb3BwYWJsZVwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgQGF1dG9iaW5kXHJcbiAgICBwdWJsaWMgZHJhZ0xlYXZlSGFuZGxlcihldmVudCA6IERyYWdFdmVudCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMud2hhdFRvUmVuZGVyRWxlbWVudC5xdWVyeVNlbGVjdG9yKCd1bCcpIS5jbGFzc0xpc3QucmVtb3ZlKFwiZHJvcHBhYmxlXCIpO1xyXG4gICAgfVxyXG5cclxufSIsIi8vIGF1dG9iaW5kIERlY29yYXRvciBcclxuXHJcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gXCIuL0NvbXBvbmVudFwiO1xyXG5pbXBvcnQgeyBEYXRhU2FuaXRpenIgfSBmcm9tIFwiLi9EYXRhU2FuaXRpenJcIjtcclxuaW1wb3J0IHsgUHJvamVjdExpc3QgfSBmcm9tIFwiLi9Qcm9qZWN0TGlzdFwiO1xyXG5pbXBvcnQgeyBQcm9qZWN0U3RhdGUgfSBmcm9tIFwiLi9Qcm9qZWN0U3RhdGVcIjtcclxuaW1wb3J0IHsgYXV0b2JpbmQgfSBmcm9tIFwiLi9BdXRvQmluZGVyXCI7XHJcbi8vIGltcG9ydCBfIGZyb20gXCJsb2Rhc2hcIjtcclxuXHJcbi8qKlxyXG4gKiAgR29hbCA6Ojo6IFxyXG4gKiAgMS4gQWNjZXNzIERpdiB3aXRoIFwicHJvamVjdC1pbnB1dFwiIGlkIGFuZCB0aGVuIGdldCBpbnB1dCBmcm9tIGl0XHJcbiAqICAyLiBkaXNwbGF5IHRoZSB0ZW1wbGF0ZSBkYXRhIGluIHRoZSBEaWMgd2l0aCBcImFwcFwiIGlkIFxyXG4gKi9cclxuY2xhc3MgUHJvamVjdElucHV0IGV4dGVuZHMgQ29tcG9uZW50PEhUTUxEaXZFbGVtZW50LEhUTUxGb3JtRWxlbWVudD4ge1xyXG4gIHByaXZhdGUgdGl0bGVJbnB1dEVsZTogSFRNTElucHV0RWxlbWVudDtcclxuICBwcml2YXRlIGRlc2NyaXB0aW9uSW5wdXRFbGU6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgcHJpdmF0ZSBwZW9wbGVJbnB1dEVsZTogSFRNTElucHV0RWxlbWVudDtcclxuICBwcml2YXRlIHByb2plY3RTdGF0ZSA6IFByb2plY3RTdGF0ZTtcclxuXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICBzdXBlcihcInByb2plY3QtaW5wdXRcIixcImFwcFwiLHRydWUsXCJ1c2VyLWlucHV0XCIpXHJcbiAgIFxyXG4gICAgLy8gcG9wdWxhdGUgdXNlciBEYXRhXHJcbiAgICB0aGlzLnRpdGxlSW5wdXRFbGUgPSB0aGlzLndoYXRUb1JlbmRlckVsZW1lbnQucXVlcnlTZWxlY3RvcignI3RpdGxlJykhIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICB0aGlzLmRlc2NyaXB0aW9uSW5wdXRFbGUgPSB0aGlzLndoYXRUb1JlbmRlckVsZW1lbnQucXVlcnlTZWxlY3RvcignI2Rlc2NyaXB0aW9uJykhIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICB0aGlzLnBlb3BsZUlucHV0RWxlID0gdGhpcy53aGF0VG9SZW5kZXJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwZW9wbGUnKSEgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICAgIFxyXG4gICAgdGhpcy5wcm9qZWN0U3RhdGUgPSBQcm9qZWN0U3RhdGUuZ2V0SW5zdGFuY2UoKTtcclxuICAgIHRoaXMuY29uZmlndXJlKCk7XHJcbiAgfVxyXG5cclxuICBAYXV0b2JpbmRcclxuICAvLyByZXR1cm5pbmcgYSB0dXBsZVxyXG4gIHByaXZhdGUgZ2F0aGVydXNlcklucHV0KCkgOiBbc3RyaW5nLHN0cmluZyxudW1iZXJdIHwgdm9pZCB7XHJcbiAgICBjb25zdCBlbnRlcmVkVGl0bGUgOiBzdHJpbmcgPSB0aGlzLnRpdGxlSW5wdXRFbGUudmFsdWU7XHJcbiAgICBjb25zdCBlbnRlcmVkRGVzYyA6IHN0cmluZyA9IHRoaXMuZGVzY3JpcHRpb25JbnB1dEVsZS52YWx1ZTtcclxuICAgIGNvbnN0IGVudGVyZWRQZW9wbGVDb3VudCA6IG51bWJlciA9IHRoaXMucGVvcGxlSW5wdXRFbGUudmFsdWVBc051bWJlcjtcclxuXHJcbiAgICAgXHJcbiAgICBjb25zdCBpc1ZhbGlkVGl0bGUgOiBib29sZWFuID0gRGF0YVNhbml0aXpyLmNyZWF0ZVZhbGlkYXRvcihlbnRlcmVkVGl0bGUpLmlzUmVxdWlyZWQodHJ1ZSkudmFsaWRhdGUoKTtcclxuICAgIGNvbnN0IGlzVmFsaWREZXNjIDogYm9vbGVhbiA9IERhdGFTYW5pdGl6ci5jcmVhdGVWYWxpZGF0b3IoZW50ZXJlZERlc2MpLmlzUmVxdWlyZWQodHJ1ZSkud2l0aE1pbkxlbmd0aCg1KS52YWxpZGF0ZSgpO1xyXG4gICAgY29uc3QgaXNWYWxpZFBlb3BsZUNvdW50IDogYm9vbGVhbiA9IERhdGFTYW5pdGl6ci5jcmVhdGVWYWxpZGF0b3IoZW50ZXJlZFBlb3BsZUNvdW50KS5pc1JlcXVpcmVkKHRydWUpLndpdGhNaW5WYWx1ZSgxKS53aXRoTWF4VmFsdWUoNSkudmFsaWRhdGUoKTtcclxuXHJcbiAgICAvLyB2YWxpZGF0ZVxyXG4gICAgaWYoaXNWYWxpZFRpdGxlICYmIGlzVmFsaWREZXNjICYmIGlzVmFsaWRQZW9wbGVDb3VudCl7XHJcbiAgICAgICAgcmV0dXJuIFtlbnRlcmVkVGl0bGUsZW50ZXJlZERlc2MsZW50ZXJlZFBlb3BsZUNvdW50XTtcclxuICAgIH1lbHNle1xyXG4gICAgICAgIC8vIHdlIGFuIHRocm93IGFuIGVycm9yICwgYnV0IHRoZW4gd2UgaGF2ZSB0byBpbXBsZW1lbnQgZXJyb3IgSGFuZGxpbmcgIFxyXG4gICAgICAgIC8vIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgSW5wdXQgYmVpbmcgc3VibWl0dGVkICwgUGxlYXNlIFRyeSBBZ2FpblwiKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIkludmFsaWQgSW5wdXQgYmVpbmcgc3VibWl0dGVkICwgUGxlYXNlIFRyeSBBZ2FpblwiKTtcclxuICAgICAgICBhbGVydChcIkludmFsaWQgSW5wdXQgYmVpbmcgc3VibWl0dGVkICwgUGxlYXNlIFRyeSBBZ2FpblwiKTtcclxuICAgICAgICByZXR1cm4gO1xyXG4gICAgfVxyXG4gIFxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjbGVhcklucHV0KCkge1xyXG4gICAgICB0aGlzLnRpdGxlSW5wdXRFbGUudmFsdWUgPSAnJztcclxuICAgICAgdGhpcy5kZXNjcmlwdGlvbklucHV0RWxlLnZhbHVlID0gJyc7XHJcbiAgICAgIHRoaXMucGVvcGxlSW5wdXRFbGUudmFsdWUgPSAnJztcclxuICB9XHJcblxyXG4gIEBhdXRvYmluZFxyXG4gIHByaXZhdGUgc3VibWl0SGFuZGxlcihldmVudCA6IEV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyAvLyBtZWFucyBzdG9wcGluZyB0aGUgaHR0cCByZXF1ZXN0IHRyaWdnZXIgKGRlZmF1bHQgYmVhaGF2aW9yKVxyXG4gICAgY29uc3QgdXNlcklucHV0ID0gIHRoaXMuZ2F0aGVydXNlcklucHV0KCk7XHJcbiAgICBpZihBcnJheS5pc0FycmF5KHVzZXJJbnB1dCkpeyAvLyB0dXBsZSBpcyBhIHR5cGUgb2Ygc3BlY2lhbGl6ZWQgQXJyYXlcclxuICAgICAgICBjb25zdCBbdGl0bGUsZGVzYyxwZW9wbGVdID0gdXNlcklucHV0O1xyXG4gICAgICAgIHRoaXMucHJvamVjdFN0YXRlLmFkZFByb2plY3QodGl0bGUsZGVzYyxwZW9wbGUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGNsZWFyIHRoZSBmb3JtIGFmdGVyIGV2ZXJ5IHN1Ym1pc3Npb25cclxuICAgIHRoaXMuY2xlYXJJbnB1dCgpO1xyXG4gICAgY29uc29sZS5sb2codGhpcy50aXRsZUlucHV0RWxlLnZhbHVlKTtcclxuICB9XHJcbiBcclxuICAvLyBzZXR0aW5nIHVwIGFuIEV2ZW50IExpc3RlbmVyXHJcbiAgcHVibGljIGNvbmZpZ3VyZSgpIHtcclxuXHJcbiAgICAvLyBpbXBvcnRhbnQgOiBpZiAndGhpcycgaXMgbm90IHBhc3NlZCBhcyBhbiBhcmd1bWVudCB0aGVuIHRoZSAndGhpcycga2V5d29yZCBpbnNpZGVcclxuICAgIC8vIHN1Ym1pdEhhbmRsZXIgd2lsbCBub3QgYmUgcG9pbnRpbmcgYXQgdGhlIGNsYXNzIGJ1dCBpdCBwb2ludHMgdG8gdGhlIGV2ZW50IHdpdGggd2hpY2ggaXQgaGFzIGJlZW4gYm91bmRcclxuXHJcbiAgICAvLyBpbiBvcmRlciB0byByZWR1Y2UgdGhhdCBhbWJpZ3VpdHkgd2UgYXJlIGJpbmRpbmcgdGhlIGFjdHVhbCAndGhpcycgcmVmZXJlbmNlIHdpdGggdGhlIHN1Ym1pdEhhbmRsZXIgY2FsbFxyXG4gICAgLy8gdGhpcy5mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLHRoaXMuc3VibWl0SGFuZGxlci5iaW5kKHRoaXMpKTtcclxuICAgIFxyXG4gICAgLy8gT3IgLCB3ZSBjYW4gdXNlIERlY29yYXRvcnMgZm9yIGJpbmRpbmcgd29yayB3aGljaCB3aWxsIG1ha2Ugb3VyIHdvcmsgZWFzaWVyXHJcbiAgICB0aGlzLndoYXRUb1JlbmRlckVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0Jyx0aGlzLnN1Ym1pdEhhbmRsZXIpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHJlbmRlckNvbnRlbnQoKSA6IHZvaWQge1xyXG5cclxuICB9XHJcblxyXG59XHJcblxyXG5cclxuY29uc3QgcHJqSW5wdXQgPSBuZXcgUHJvamVjdElucHV0KCk7XHJcbmNvbnN0IGFjdGl2ZVByakxpc3QgPSAgbmV3IFByb2plY3RMaXN0KCdhY3RpdmUnKTtcclxuY29uc3QgZmluaXNoZWRQcmpMaXN0ID0gIG5ldyBQcm9qZWN0TGlzdCgnZmluaXNoZWQnKTtcclxuXHJcbmNvbnNvbGUubG9nKFwiJSUlJSUlJSUqKioqKioqLiAgICAoKCgoKSkpKS4uLi4uLiAgIFwiKTtcclxuY29uc29sZS5sb2coXCJkY2hzZGtqc2Rja2pzZFwiKTtcclxuXHJcbiAvLyBjb25zb2xlLmxvZyhfLnNodWZmbGUoWzEsMiwzXSkpO1xyXG5cclxuXHJcblxyXG4gXHJcbiAiXSwic291cmNlUm9vdCI6IiJ9